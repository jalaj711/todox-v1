(this.webpackJsonptodox=this.webpackJsonptodox||[]).push([[16],{257:function(e,t,a){"use strict";a.r(t);var n=a(24),i=a(37),r=a(38),o=a(33),s=a(40),l=a(39),d=a(0),c=a.n(d),m=a(5),u=a(106),b=a(78),f=a(1),h=a(2),p=(a(4),a(3)),g=a(6),v=a(15),E=a(41),O=d.forwardRef((function(e,t){var a=e.classes,n=e.className,i=e.color,r=void 0===i?"primary":i,o=e.value,s=e.valueBuffer,l=e.variant,c=void 0===l?"indeterminate":l,m=Object(h.a)(e,["classes","className","color","value","valueBuffer","variant"]),u=Object(E.a)(),b={},v={bar1:{},bar2:{}};if("determinate"===c||"buffer"===c)if(void 0!==o){b["aria-valuenow"]=Math.round(o),b["aria-valuemin"]=0,b["aria-valuemax"]=100;var O=o-100;"rtl"===u.direction&&(O=-O),v.bar1.transform="translateX(".concat(O,"%)")}else 0;if("buffer"===c)if(void 0!==s){var w=(s||0)-100;"rtl"===u.direction&&(w=-w),v.bar2.transform="translateX(".concat(w,"%)")}else 0;return d.createElement("div",Object(f.a)({className:Object(p.a)(a.root,a["color".concat(Object(g.a)(r))],n,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[c]),role:"progressbar"},b,{ref:t},m),"buffer"===c?d.createElement("div",{className:Object(p.a)(a.dashed,a["dashedColor".concat(Object(g.a)(r))])}):null,d.createElement("div",{className:Object(p.a)(a.bar,a["barColor".concat(Object(g.a)(r))],("indeterminate"===c||"query"===c)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[c]),style:v.bar1}),"determinate"===c?null:d.createElement("div",{className:Object(p.a)(a.bar,("indeterminate"===c||"query"===c)&&a.bar2Indeterminate,"buffer"===c?[a["color".concat(Object(g.a)(r))],a.bar2Buffer]:a["barColor".concat(Object(g.a)(r))]),style:v.bar2}))})),w=Object(m.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(v.e)(t,.62):Object(v.a)(t,.5)},a=t(e.palette.primary.main),n=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:n},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(O),k=a(260),j=a(240),y=a(263),C=a(256),x=a(245),D=a(264),I=a(204),T=a(180),N=a(151),R=Object(N.a)(c.a.createElement("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm2 16H5V5h11.17L19 7.83V19zm-7-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3zM6 6h9v4H6z"}),"SaveOutlined"),S=a(246),B=a(158),L=a(255),P=a(185),z=a(186),M=a(183),V=a(188),q=a(43),H=a(187),A=a(23),W=function(e){Object(s.a)(d,e);var t=Object(l.a)(d);function d(e){var a;return Object(i.a)(this,d),(a=t.call(this,e)).state={lists:[],listname:"",importance:0,setReminder:!1,reminder:new Date,notifTimeDelta:.5,loading:!0},a.classes=e.classes,a.taskID=e.match.params.id,a.updateImportance=a.updateImportance.bind(Object(o.a)(a)),a.updateListname=a.updateListname.bind(Object(o.a)(a)),a.updateReminder=a.updateReminder.bind(Object(o.a)(a)),a.updateReminderTime=a.updateReminderTime.bind(Object(o.a)(a)),a.updateNotifDelta=a.updateNotifDelta.bind(Object(o.a)(a)),a.validateDate=a.validateDate.bind(Object(o.a)(a)),a.updateTodo=a.updateTodo.bind(Object(o.a)(a)),a}return Object(r.a)(d,[{key:"componentDidMount",value:function(){var e=this;window.setTitle&&window.setTitle("Edit"),document.title="Edit";var t=function(){window.database.getMultipleByFilters("lists","name",{filter:"__ne",val:""},(function(t){window.database.get("tasks",e.taskID).onsuccess=function(a){var i=a.target.result;e.setState(Object(n.a)(Object(n.a)({},e.state),{},{loading:!1,title:i.title,description:i.description,reminder:i.deadline,notifTimeDelta:i.notifTimeDelta,importance:i.starred,setReminder:!!i.reminder,listname:i.parent,lists:t}))}}))};window.database?t():a.e(0).then(a.bind(null,153)).then((function(e){console.log("[indexedDB] Creating database instance");var a=new e.default;a.onsuccess=function(e){window.database=a,t()}}))}},{key:"updateListname",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{listname:e.target.value}))}},{key:"updateImportance",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{importance:e.target.value}))}},{key:"updateReminder",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{setReminder:e.target.checked}))}},{key:"updateReminderTime",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{reminder:e}))}},{key:"updateNotifDelta",value:function(e){this.setState(Object(n.a)(Object(n.a)({},this.state),{},{notifTimeDelta:e.target.value}))}},{key:"validateDate",value:function(){var e=this;if(this.setState(Object(n.a)(Object(n.a)({},this.state),{},{nameError:!1,dateError:!1})),document.getElementById("task-edit-title").value)if(this.state.setReminder){var t,i,r,o=new Date(this.state.reminder),s=this.state.notifTimeDelta;r=10*s,r-=60*(i=(r-r%60)/60),i-=24*(t=(i-i%24)/24),o=Object(z.a)(o,{days:t,hours:i,minutes:r}),Object(M.a)(o)?this.setState(Object(n.a)(Object(n.a)({},this.state),{},{dateError:"You can not choose a past date!"})):Object(V.a)(o,new Date)>25?this.setState(Object(n.a)(Object(n.a)({},this.state),{},{dateError:"Cannot set reminder for a task that is due more than 25 days from now"})):window.database?this.updateTodo(o,s):a.e(0).then(a.bind(null,153)).then((function(t){console.log("[indexedDB] Creating database instance");var a=new t.default;a.onsuccess=function(t){window.database=a,e.updateTodo(o,s)}}))}else window.database?this.updateTodo(null):a.e(0).then(a.bind(null,153)).then((function(t){console.log("[indexedDB] Creating database instance");var a=new t.default;a.onsuccess=function(t){window.database=a,e.updateTodo(null)}}));else this.setState(Object(n.a)(Object(n.a)({},this.state),{},{nameError:"Please enter a title for the task"}))}},{key:"updateTodo",value:function(e,t){var n=this;this.props.openSnackbar({text:"Updating todo...",showActionButton:!1}),a.e(1).then(a.bind(null,173)).then((function(a){var i=new a.default.Todo({title:document.getElementById("task-edit-title").value,description:document.getElementById("task-edit-description").value,parent:n.state.listname,reminder:e,deadline:n.state.setReminder?n.state.reminder:null,starred:n.state.importance,done:!1,status:0,notifTimeDelta:t},(function(){window.database.update("tasks",n.taskID,i,(function(e){e.target.result&&(n.props.openSnackbar({text:"Updated todo.",showActionButton:!1}),n.props.history.goBack())}))}))}))}},{key:"render",value:function(){return c.a.createElement("div",{className:this.props.classes.root},this.state.loading?c.a.createElement(u.a,{open:!0},c.a.createElement(b.a,null,"Loading the details of your todo..."),c.a.createElement(w,null)):c.a.createElement("div",null,c.a.createElement("form",{autoComplete:"false"},c.a.createElement(k.a,{className:this.classes.input,variant:"outlined",label:"Enter task name",id:"task-edit-title",autoComplete:"off",error:!!this.state.nameError,helperText:this.state.nameError||"",defaultValue:this.state.title}),c.a.createElement(k.a,{className:this.classes.input,variant:"outlined",autoComplete:"off",id:"task-edit-description",label:"Enter task details (Optional)",defaultValue:this.state.description||"",multiline:!0}),c.a.createElement(j.a,{variant:"outlined",className:this.classes.formControl},c.a.createElement(y.a,{id:"list-edit-choosing-label"},"Choose where to add"),c.a.createElement(C.a,{labelId:"list-edit-choosing-label",id:"list-edit-chooser",value:this.state.lists?this.state.listname:-1,disabled:!this.state.lists,onChange:this.updateListname,label:"Choose where to add"},this.state.lists?this.state.lists.map((function(e){return c.a.createElement(x.a,{value:e.id,key:e.id},e.name.capitalize())})):c.a.createElement(x.a,{value:-1},"Loading..."))),c.a.createElement(j.a,{variant:"outlined",className:this.classes.formControl},c.a.createElement(y.a,{id:"importance-edit-choosing-label"},"Important?"),c.a.createElement(C.a,{labelId:"importance-edit-choosing-label",id:"importance-edit-chooser",value:this.state.importance,onChange:this.updateImportance,label:"Important?"},c.a.createElement(x.a,{value:1},"Yes"),c.a.createElement(x.a,{value:0},"No"))),c.a.createElement("div",{className:this.classes.reminders},c.a.createElement("div",{className:this.classes.reminderControl},c.a.createElement(b.a,{component:"span"},"Reminders"),c.a.createElement("div",{className:this.classes.grow}),c.a.createElement(D.a,{checked:this.state.setReminder,onChange:this.updateReminder,color:"primary"})),c.a.createElement(I.a,{in:this.state.setReminder,className:"".concat(this.classes.collapse," ").concat(this.state.setReminder?this.classes.reminderOn:this.classes.reminderOff)},c.a.createElement(B.a,{utils:P.a},c.a.createElement(L.a,{label:"Pick a date & time",variant:"dialog",inputVariant:"outlined",value:this.state.reminder||"",onChange:this.updateReminderTime,error:!!this.state.dateError,helperText:this.state.dateError||""})),c.a.createElement(j.a,{variant:"outlined"},c.a.createElement(y.a,{id:"notif-delta-edit-choosing-label"},"When should we remind you?"),c.a.createElement(C.a,{labelId:"notif-delta-edit-choosing-label",id:"notif-delta-edit-chooser",value:this.state.notifTimeDelta||"",onChange:this.updateNotifDelta,label:"When should we remind you?"},c.a.createElement(x.a,{value:.1},"1 min before"),c.a.createElement(x.a,{value:.2},"2 min before"),c.a.createElement(x.a,{value:.5},"5 min before"),c.a.createElement(x.a,{value:1},"10 min before"),c.a.createElement(x.a,{value:1.5},"15 min before"),c.a.createElement(x.a,{value:3},"30 min before"),c.a.createElement(x.a,{value:6},"1 hr before"),c.a.createElement(x.a,{value:12},"2 hr before"),c.a.createElement(x.a,{value:36},"6 hr before"),c.a.createElement(x.a,{value:144},"1 day before")))))),c.a.createElement(T.a,{className:this.classes.fabRight,variant:"extended",color:"primary",onClick:this.validateDate},c.a.createElement(R,{className:this.classes.fabIcon}),"Save"),c.a.createElement(T.a,{className:this.classes.fabLeft,variant:"extended",onClick:this.props.history.goBack},c.a.createElement(S.a,{className:this.classes.fabIcon}),"Cancel")))}}]),d}(c.a.Component),$={openSnackbar:q.c};t.default=Object(H.a)(Object(m.a)((function(e){return{root:{display:"block",maxHeight:"calc(85vh - 70px)"},formControl:{margin:e.spacing(1),marginLeft:0,width:"45%"},grow:{flexGrow:1},fabRight:{position:"fixed",bottom:25,right:25},fabLeft:function(){var t={position:"fixed",bottom:25,left:25};return window.innerWidth>e.breakpoints.values.sm&&(t.left=265),t},fabIcon:{marginRight:e.spacing(1)},input:{margin:e.spacing(1),marginLeft:0,width:"100%"},reminders:{width:"100%",margin:e.spacing(1),marginLeft:0,borderRadius:4,border:"1px solid rgba(150, 150, 150, 0.4)","& .MuiTypography-root":{padding:8},"& .MuiSwitch-root":{float:"right"},":hover":{border:"1px solid white"}},reminderControl:{padding:e.spacing(1.5),width:"100%",display:"flex"},reminderOn:{padding:e.spacing(2)},reminderOff:{padding:0},collapse:{"& .MuiFormControl-root":{margin:e.spacing(1),marginLeft:0,width:"-webkit-fill-available"}}}})),Object(A.b)(null,$))(W)}}]);
//# sourceMappingURL=16.61a25d90.chunk.js.map