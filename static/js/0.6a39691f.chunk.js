(this.webpackJsonptodox=this.webpackJsonptodox||[]).push([[0],{153:function(e,t,r){"use strict";r.r(t);var o=r(24),n=r(37),s=r(38),c=function(){function e(t){var o=this;Object(n.a)(this,e),t=t||"todox-v1",this.request=window.indexedDB.open(t),this.request.onsuccess=function(e){if(o.isNew)try{r.e(1).then(r.bind(null,173)).then((function(e){["today","bills","shopping","work"].forEach((function(t){var r=new e.default.TodoList(t,(function(){o.add("lists",r)}),{id:t})}))}))}catch(t){console.error(t)}o.db=e.target.result;try{o.onsuccess(e)}catch(t){console.warn(t),console.log("[indexedDB] DB creation success")}},this.request.onerror=function(e){try{o.onerror(e)}catch(t){console.warn(t),console.log("[indexedDB] Database error:"+o.request.errorCode)}},this.request.onupgradeneeded=function(e){o.db=e.target.result,o.objectStores={},o.isNew=!0,o.objectStores.lists=o.db.createObjectStore("lists",{keyPath:"id"}),o.objectStores.tasks=o.db.createObjectStore("tasks",{keyPath:"id"}),o.objectStores.meta=o.db.createObjectStore("meta"),o.objectStores.lists.createIndex("name","name",{unique:!0}),o.objectStores.tasks.createIndex("status","status",{unique:!1}),o.objectStores.tasks.createIndex("parent","parent",{unique:!1}),o.objectStores.tasks.createIndex("starred","starred",{unique:!1})}}return Object(s.a)(e,[{key:"add",value:function(e,t,r,o){var n=this.db.transaction([e],"readwrite");return n.onerrror=r||function(e){return console.log("[indexedDB] DB Add error: "+e)},n.oncomplete=o||function(e){return console.log("[indexedDB] Task success: "+e)},n.objectStore(e).add(t)}},{key:"delete",value:function(e,t,r,o){var n=this.db.transaction([e],"readwrite");return n.onerrror=r||function(e){return console.log("[indexedDB] DB Remove error: "+e)},n.oncomplete=o||function(e){return console.log("[indexedDB] Task success: "+e)},n.objectStore(e).delete(t)}},{key:"get",value:function(e,t,r,o){var n=this.db.transaction([e],"readwrite");return n.onerrror=r||function(e){return console.log("[indexedDB] DB Get error: "+e)},n.oncomplete=o||function(e){return console.log("[indexedDB] Task success: "+e)},n.objectStore(e).get(t)}},{key:"update",value:function(e,t,r,n,s){var c=this.db.transaction([e],"readwrite");c.onerrror=s||function(e){return console.log("[indexedDB] DB Update error: "+e)},c.oncomplete=function(e){return console.log("[indexedDB] Task success: "+e)};var a=c.objectStore(e);a.get(t).onsuccess=function(e){var s=e.target.result;s=Object(o.a)(Object(o.a)(Object(o.a)({},s),r),{},{id:t}),a.put(s).onsuccess=function(e){n&&n(e)}}}},{key:"getByIndex",value:function(e,t,r,o,n){var s=this.db.transaction([e],"readwrite");return s.onerrror=o||function(e){return console.log("[indexedDB] DB Search error: "+e)},s.oncomplete=n||function(e){return console.log("[indexedDB] Task success: "+e)},s.objectStore(e).index(t).get(r)}},{key:"getAllByIndex",value:function(e,t,r,o,n){var s=this.db.transaction([e],"readwrite");return s.onerrror=n||function(e){return console.log("[indexedDB] DB Search error: "+e)},s.oncomplete=o||function(e){return console.log("[indexedDB] Task success: "+e)},s.objectStore(e).index(t).getAll(r)}},{key:"getMultipleByKey",value:function(e,t,r,o,n){var s=this.db.transaction([e]).objectStore(e),c=[];return s.openCursor().onsuccess=function(e){var s=e.target.result;s?(s.value[t]===r&&c.push(s.value),!n||c.length<=n?s.continue():o(c)):o(c)},c}},{key:"getMultipleByFilters",value:function(e,t,r,o,n){var s=this.db.transaction([e]).objectStore(e),c=[];s.openCursor().onsuccess=function(e){var s=e.target.result;if(s){if("object"!==typeof r&&s.value[t]===r)c.push(s.value);else if("object"===typeof r){var a=!1,u=s.value[t];switch(r.filter){case"__lt":a=u<r.val;break;case"__lte":a=u<=r.val;break;case"__gt":a=u>r.val;break;case"__gte":a=u>=r.val;break;case"__ne":a=u!==r.val;break;case"__re":a=r.val.test(u);break;default:a=!1}a&&c.push(s.value)}(!n||c.length<=n)&&s.continue()}else o(c)}}}]),e}();t.default=c}}]);
//# sourceMappingURL=0.6a39691f.chunk.js.map